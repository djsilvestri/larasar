(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"051b":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"q-pa-md"},[a("q-btn",{staticClass:"q-mb-md",attrs:{icon:"add_circle_outline",rounded:"",label:e.$t("add_user")},on:{click:function(t){e.addUser=!0,e.editUser=!1,e.role=e.name=e.email=e.avatar=null}}}),a("q-dialog",{model:{value:e.addUser,callback:function(t){e.addUser=t},expression:"addUser"}},[a("q-card",{staticClass:"my-card text-white",staticStyle:{width:"800px"}},[a("q-card-section",{staticClass:"bg-primary"},[a("div",{staticClass:"text-h6"},[e._v(e._s(e.editUser?e.$t("update_user"):e.$t("add_user")))])]),a("div",{staticClass:"q-pa-md"},[a("q-img",{staticClass:"q-mb-xl",staticStyle:{width:"100%"},attrs:{src:e.avatar,"native-context-menu":""}}),a("q-select",{staticClass:"q-pb-md",attrs:{filled:"",hint:e.role_data,options:1==e.authGetter.id||"Admin"==e.authGetter.role?e.admin:e.seller,label:e.role||e.$t("role"),rules:[function(t){return t&&t.length>0||e.role_data}]},model:{value:e.role,callback:function(t){e.role=t},expression:"role"}}),a("q-input",{attrs:{filled:"","lazy-rules":"",label:e.name||e.$t("name"),hint:e.name_data,rules:[function(t){return t&&t.length>0||e.name_data}]},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),a("q-input",{attrs:{filled:"",type:"email","lazy-rules":"",label:e.email||e.$t("email"),hint:e.email_data,rules:[function(t){return t&&t.length>0||e.email_data}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),a("q-input",{staticClass:"q-pt-md",attrs:{filled:"","lazy-rules":"",label:e.$t("password"),type:e.isPwd?"password":"text",hint:e.password_data,rules:[function(t){return t&&t.length>0||e.password_data}]},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),a("q-input",{attrs:{filled:"",type:e.isPwd?"password":"text",label:e.$t("confirm_password")},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}]),model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}}),a("div",{staticClass:"q-pt-md"},[e.editUser?a("q-btn",{attrs:{color:"primary",label:e.$t("update_user")},on:{click:function(t){return t.preventDefault(),e.update(e.user)}}}):a("q-btn",{attrs:{color:"primary",if:"addUser",label:e.$t("add_user")},on:{click:function(t){return t.preventDefault(),e.add(t)}}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-ma-md",attrs:{"no-caps":"",label:"Close",color:"primary"}})],1)],1)],1)],1),a("q-table",{attrs:{title:e.$t("users_list"),data:e.data,columns:e.columns,"row-key":"id",pagination:e.pagination,loading:e.loading,filter:e.filter,"binary-state-sort":""},on:{"update:pagination":function(t){e.pagination=t},request:e.onRequest},scopedSlots:e._u([{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{key:"id",attrs:{props:t}},[e._v(e._s(t.row.id))]),a("q-td",{key:"name",attrs:{props:t}},[e._v("\n          "+e._s(t.row.name)+"\n          "),a("q-popup-edit",{attrs:{title:"Update calories",buttons:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}},[a("q-input",{attrs:{dense:"",autofocus:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}})],1)],1),a("q-td",{key:"email",attrs:{props:t}},[a("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.email))]),a("q-popup-edit",{model:{value:t.row.email,callback:function(a){e.$set(t.row,"email",a)},expression:"props.row.email"}},[a("q-input",{attrs:{type:"textarea",dense:"",autofocus:""},model:{value:t.row.email,callback:function(a){e.$set(t.row,"email",a)},expression:"props.row.email"}})],1)],1),a("q-td",{key:"status",attrs:{props:t}},[e._v("\n          "+e._s(t.row.status)+"\n          "),a("q-popup-edit",{attrs:{title:"Update carbs",buttons:"",persistent:""},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"props.row.status"}},[a("q-input",{attrs:{type:"number",dense:"",autofocus:"",hint:"Use buttons to close"},model:{value:t.row.status,callback:function(a){e.$set(t.row,"status",a)},expression:"props.row.status"}})],1)],1),a("q-td",{key:"role",attrs:{props:t}},[e._v(e._s(t.row.role))]),a("q-td",{key:"edit",attrs:{props:t}},[a("q-btn",{staticClass:"q-ma-md",attrs:{icon:"edit",rounded:""},on:{click:function(a){e.edit(t.row),e.addUser=!0}}})],1),a("q-td",{key:"delete",attrs:{props:t}},[a("q-btn",{staticClass:"*q-mb-md",attrs:{icon:"delete_forever",rounded:""},on:{click:function(a){return a.preventDefault(),e.Delete(t.row)}}})],1)],1)]}},{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0}])})],1)},n=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("6762"),a("2fdb"),a("4db1")),i=a.n(r),o=a("967e"),l=a.n(o),d=(a("96cf"),a("fa84")),c=a.n(d),u=(a("7f7f"),a("c47a")),p=a.n(u),m=a("2f62");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){p()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var w={data:function(){return{addUser:!1,editUser:!1,html:null,role:null,name:null,name_data:null,email:null,email_data:null,password:null,password_data:null,password_confirmation:null,isPwd:!0,filter:"",loading:!1,admin:["Admin","Seller","Buyer"],seller:["Seller","Buyer"],pagination:{descending:!1,page:1,rowsPerPage:5,rowsNumber:10},columns:[{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"name",align:"center",label:this.$t("name"),field:"name",sortable:!0},{name:"email",align:"center",label:this.$t("email"),field:"email",sortable:!0},{name:"status",align:"center",label:this.$t("status"),field:"status",sortable:!0},{name:"role",align:"center",label:this.$t("role"),field:"role",sortable:!0},{name:"edit",align:"center",label:this.$t("edit"),field:"edit",sortable:!0},{name:"delete",align:"center",label:this.$t("delete"),field:"delete",sortable:!0}],data:[],original:[]}},computed:b({},Object(m["c"])("users",["usersGetter","authGetter"])),mounted:function(){var e=this;this.$store.dispatch("users/usersAction").then((function(){e.original=e.usersGetter,e.onRequest({pagination:e.pagination,filter:void 0})}))},methods:{add:function(e){var t=this;this.$store.dispatch("users/registerAction",{auth:this.authGetter,role:this.role,name:this.name,email:this.email,password:this.password,password_confirmation:this.password_confirmation,api:"add",scope:""}).then((function(){t.role=t.name=t.email=t.password=t.password_confirmation=null,t.$store.dispatch("users/usersAction").then((function(){t.original=t.usersGetter,t.onRequest({pagination:t.pagination,filter:void 0})}))})).catch((function(e){t.role_data=[e.response.data.errors.role][0]||e.response.data.message,t.name_data=[e.response.data.errors.name][0]||e.response.data.message,t.email_data=[e.response.data.errors.email][0]||e.response.data.message,t.password_data=[e.response.data.errors.password][0]||e.response.data.message}))},edit:function(e){var t=this;return c()(l.a.mark((function a(){var s;return l.a.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$axios.get("api/users/".concat(e.id,"?avatar=1"));case 2:s=a.sent,t.avatar=s.data,t.role=e.role,t.name=e.name,t.email=e.email,t.editUser=!0,t.user=e;case 9:case"end":return a.stop()}}),a)})))()},update:function(e){var t=this,a={id:e.id,user:!0,role:this.role,name:this.name,email:this.email,update_password:this.password,password_confirmation:this.password_confirmation},s=new FormData;s.append("avatar",this.avatar),this.$store.dispatch("users/updateAction",b({},s,{},a)).then((function(){t.password=t.password_confirmation=null,t.$store.dispatch("users/usersAction").then((function(){t.original=t.usersGetter,t.onRequest({pagination:t.pagination,filter:void 0})}))}))},Delete:function(e){var t=this;this.$store.dispatch("users/deleteAction",e).then((function(e){t.$store.dispatch("users/usersAction").then((function(){t.original=t.usersGetter,t.onRequest({pagination:t.pagination,filter:void 0})})),t.$q.notify({color:"positive",position:"top",message:e,icon:"check"})}))},onRequest:function(e){var t=this,a=e.pagination,s=a.page,n=a.rowsPerPage,r=a.sortBy,o=a.descending,l=e.filter;this.loading=!0,setTimeout((function(){var e;t.pagination.rowsNumber=t.getRowsNumberCount(l);var a=0===n?t.pagination.rowsNumber:n,d=(s-1)*n,c=t.fetchFromServer(d,a,l,r,o);(e=t.data).splice.apply(e,[0,t.data.length].concat(i()(c))),t.pagination.page=s,t.pagination.rowsPerPage=n,t.pagination.sortBy=r,t.pagination.descending=o,t.loading=!1}),1500)},fetchFromServer:function(e,t,a,s,n){var r=a?this.original.filter((function(e){return e.name.includes(a)})):this.original.slice();if(s){var i="desc"===s?n?function(e,t){return e.name>t.name?-1:e.name<t.name?1:0}:function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}:n?function(e,t){return parseFloat(t[s])-parseFloat(e[s])}:function(e,t){return parseFloat(e[s])-parseFloat(t[s])};r.sort(i)}return r.slice(e,e+t)},getRowsNumberCount:function(e){if(!e)return this.original.length;var t=0;return this.original.forEach((function(a){a.name.includes(e)&&++t})),t}}},h=w,g=a("2877"),v=a("eebe"),_=a.n(v),q=a("9c40"),y=a("24e8"),k=a("f09f"),$=a("a370"),x=a("068f"),P=a("ddd8"),C=a("27f9"),O=a("0016"),U=a("eaac"),S=a("bd08"),j=a("db86"),D=a("42a1"),Q=a("7f67"),A=Object(g["a"])(h,s,n,!1,null,null,null);t["default"]=A.exports;_()(A,"components",{QBtn:q["a"],QDialog:y["a"],QCard:k["a"],QCardSection:$["a"],QImg:x["a"],QSelect:P["a"],QInput:C["a"],QIcon:O["a"],QTable:U["a"],QTr:S["a"],QTd:j["a"],QPopupEdit:D["a"]}),_()(A,"directives",{ClosePopup:Q["a"]})}}]);